<!DOCTYPE html>
<html>

 <head>
  <meta charset='utf-8' />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <meta name="description" content="Mailjs : mail.js:  http://mailjs.org" />

  <link href='http://fonts.googleapis.com/css?family=Oxygen:400,300,700;Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" media="screen" href="styles.css">
  <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  <title>Mailjs</title>
 </head>

 <body>
  <a href="https://github.com/dimensia/mailjs"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
  <div class="header">
   <i class="fa fa-envelope-o"></i>
   Mail.js
  </div>
  <div class="body">
   <a style="float:right; margin-left: 8px;" href="https://www.npmjs.com/package/mailjs"><img src="https://img.shields.io/npm/v/mailjs.svg" alt="npm version"></a>
   <img style="float:right;" src="https://api.travis-ci.org/dimensia/mailjs.svg">

   <div>
    <h3>What</h3>
    <p>
     Mail.js is an open-source JavaScript library designed to help <b>render</b> email.
    </p>
    <p>
     Note that Mail.js is <i>not</i> a mail transport -- Mail.js works <i>with</i> mail transport packages like
     <a href="http://www.nodemailer.com/">Nodemailer</a>.  (<a href="#nodemailer">Nodemailer integration</a> is also
     built into Mail.js.)
    </p>
   </div>

   <div>
    <h3>Why</h3>
    Email is notoriously hard to format for correctly.  Two problems which this library attempts to help mitigate are:

    <ul>
     <li>Email clients vary <i>widely</i> in how they handle HTML
     <li>Formatting both text and HTML email messages without message duplication can be painful
    </ul>
    
   </div>

   <div>
    <h3>How</h3>

    Mail.js uses a simple template system which allows you to simply craft your emails while making it easy to generate both
    text and HTML messages from the same source.  It also bakes in email boilerplate like <a href="http://htmlemailboilerplate.com/">HTML Email Boilerplate</a> behind
    the scenes to solve many of the email rendering idiosyncrasies across email renderers.
   </div>

   <div>
    <h3>Install</h3>

    <pre><code>npm install mailjs <i>--save</i></code></pre>

    <p>
     Mail.js supports CommonJS- and AMD-style module bindings.  If neither module system is detected it will expose a global <span class="code"><b>mailjs</b></span> variable.
    </p>
    
    <p>
     Mail.js is intended to be run inside Node.js but nothing prohibits it being used in a web browser.
    </p>

    <p>
     Mail.js is hosted on <a href="https://github.com/dimensia/mailjs"><i class="fa fa-github"></i> Github</a>.
    </p>
   </div>

   <div>
    <h3>API</h3>

    <h4 id="config">Methods</h4>

    <p><span class="code">mailjs.config()</span> configures Mail.js options:</p>
    <pre><code>mailjs.config({
  <b>binds</b>: <span class="desc">An object containing common bind definitions.</span>
  <b>templates</b>: <span class="desc">An object containing common template definitions.</span>
  <b>transport</b>: <span class="desc">Nodemailer transport for <a href="#nodemailer">Nodemailer integration</a>.</span>
});
</code></pre>

    <p><span class="code">mailjs.render()</span> formats email:</p>
    <pre><code>mailjs.render({
  <b>src</b>: <span class="desc">A string or <a href="#functionTemplates">function</a> containing the template to render.</span>
  <b>binds</b>: <span class="desc">An object containing bind definitions that will be available while processing this render.</span>
  <b>templates</b>: <span class="desc">An object containing template definitions that will be available while processing this render.</span>
  <b>html</b>: <span class="desc">A boolean indicating whether HTML (true) or text (false) should be rendered.</span>
  <b>css</b>: <span class="desc">A string containing any CSS that should be processed in the template.  This CSS will be inlined.</span>
});
</code></pre>

    <h4>Rendering Emails</h4>

    <p>
     Mail.js uses <i>binds</i> and <i>templates</i> to render email.
    </p>
    <p>
     Bindings and templates are <i>late bound</i> -- this means you can provide a definition for a binding or template
     <i>after</i> it has been referenced.
    </p>
    <p>
     Bindings and templates can also recursively reference other bindings and templates -- in particular, binds can also reference templates.  (Be careful
     not to cause infinite recursive cycles.)
    </p>

    <h4>Binds</h4>

    <p>
     Binds are simple text variables that are essentially lightweight templates.  Their syntax for usage is similar to string interpolation in
     EcmaScript 6 except that an exclamation point (!) is used instead of a dollar sign ($).
    </p>
    <pre class="code">src: 'Hello !firstName !{lastName},',
binds: {
  firstName: 'Jane',
  lastName: 'Doe'
}</pre>
    <div class="example">Bind Usage and Definition Example</div>

    <p>Bind definitions can also be <a href="#functionTemplates">function</a>s as well.</p>

    <h4>Templates</h4>

    <p>
     Templates are a more advanced form of binding.  Template options are:
    </p>
<pre class="code"><span class="desc">template options</span>: {
  <b>html</b>: <span class="desc">A string or <a href="#functionTemplates">function</a> containing the HTML to display for this template when rendering HTML.</span>
  <b>text</b>: <span class="desc">A string or <a href="#functionTemplates">function</a> containing the text to display for this template when rendering text.  If <b>html</b> is provided, but this is left blank, it will default to ''.</span>
  <b>src</b>: <span class="desc">A string or <a href="#functionTemplates">function</a> that will work for both HTML and text rendering.  If specifing <b>html</b> and <b>text</b>, do not specify <b>src</b>.</span>
  <b>htmlClose</b>: <span class="desc">HTML string or <a href="#functionTemplates">function</a> for closing template tags.</span>
  <b>textClose</b>: <span class="desc">Text string or <a href="#functionTemplates">function</a> for closing template tags.</span>
  <b>srcClose</b>: <span class="desc">A string or <a href="#functionTemplates">function</a> that will work for both HTML and text rendering for closing template tags.</span>
  <b>binds</b>: <span class="desc">An object containing bind definitions that will be added to the scope when processing this template.  This is also used to establish default values for optional template attributes.</span>
  <b>templates</b>: <span class="desc">An object containing template definitions that will be added to the scope when processing this template.</span>
}</pre>
    <div class="example">Template Options</div>

    <p>
     It is often possible to use <span class="code">src</span>-style tags because the template string can contain references to other templates that abstract the
     differences between HTML and text.  Essentially if you abstract the differences between HTML and text into simple templates then your composite
     templates will tend to be more reusable across HTML and text.
    </p>
    <p>
     Templates syntax is similar to HTML's use of angular brackets, but with square brackets instead:
    </p>
    <pre class="code">src: '[a href="!companyUrl"]our url[/a]'</pre>
    <div class="example">Template Usage Example</div>

    <p>
     A shortcut to assign a parameter with the same name as the template exists.  The following two are equivalent:
    </p>
    <pre class="code">src: '[email email="!companyUrl" label="a label"]'</pre>

    <p>The following is a shortcut of the preceding:</p>

    <pre class="code">src: '[email="!companyUrl" label="a label"]'</pre>

    <p>
     If none of the <span class="code">*Close</span> options are supplied, the template cannot be used with either self-closing tag (i.e. <span class="code">[a <i>...</i> /]</span>)
     or a standalone close tag (i.e. <span class="code">[/a]</span>) and Mail.js will throw an exception.
    </p>

    <h4>Escape Character</h4>

    <p>If you need to use the <span class="code">!</span>, <span class="code">[</span>, or <span class="code">\</span> characters, escape them using the backslash <span class="code">\</span> character.
    <pre class="code">!firstName owes !vendor $50.00\!</pre>
    <div class="example">Escape Character Example</div>

    <h4 id="functionTemplates">Template &amp; Binding Functions</h4>

    <p>
     All template strings and bindings can be a function returning a string instead of a string.  This function will be passed a Scope object that can be used to lookup the values of bindings.
    </p>
    <pre class="code">src: function( scope ) {
  var size = scope.binding( 'size' );

  return size !== 'large' ? '[regular]' : '[large]';
}</pre>
    <div class="example">Template Function Example</div>

    <p>The Scope API is:</p>

    <ul>
     <li>
      <span class="code"><b>binding( <i>name</i> )</b></span><br>
      <span class="desc">Looks up a value for a binding by given <i>name</i>.</span>
     </li>
     <li>
      <span class="code"><b>if( <i>name</i>, <i>truthy</i>, <i>falsey</i> )</b></span><br>
      <span class="desc">If a binding by the name <i>name</i> exists, return <i>truthy</i> otherwise return <i>falsey</i> (if defined, if not return an empty string).</span>
     </li>
    </ul>

    <h4>Builtin Bindings and Templates</h4>

    <p>The following builtin bindings are available to override:</p>
    <ul>
     <li><span class="code"><b>!title</b></span> - Used as a title of the email.  Optional.
     <li><span class="code"><b>!headBlock</b></span> - Extra styles to be placed in the head style block.
    </ul>

    <p>The following templates are available, they incorporate a lot of <a href="#emailBoilerplate">email boilerplate</a> to increase portability of rendering:<p>
    <ul>
     <li><span class="code"><b>html</b></span> - Default definition for the <b>html</b> tag.  Supports closing tag.
     <li><span class="code"><b>head</b></span> - Default definition for the <b>head</b> tag.  Supports closing tag.
     <li><span class="code"><b>tdiv</b></span> - A table-based replacement for the HTML <b>div</b> tag.  Some email renderers ignore padding on DIV elements so tables are often used instead.  Supports closing tag.
     <li><span class="code"><b>button</b></span> - A table-based replacement for the HTML <b>button</b> tag.  Also supports rendering buttons with padding and rounded corners in Outlook.
    </ul>
   
    <p>
     The special built-in <b>wrapper</b> template is automatically wrapped around all <span class="code">render</span> calls.
     By default it contains the following (but you can override it in your <span class="code">mailjs.config</span> call):
    </p>
    <pre class="code">wrapper: {
  html:
    '[html]\n' +
     '[head/]\n' +
     '&lt;body&gt;\n',
  htmlClose:
     '&lt;/body&gt;\n' +
    '[/html]'
}</pre>
    <div class="example">Default <span class="code">wrapper</span> template</div>

    <p>
     <b>Please <a href="https://github.com/dimensia/mailjs/blob/master/mail.js">view the top of the <span class="code">mail.js</span> source file</a> for more information about the builtin templates and why
     they exist.</b>
    </p>

    <h4 id="nodemailer">Nodemailer Integeration</h4>

    <p>
     Mail.js has built-in integration with <a id="nodemailer" href="http://nodemailer.com">Nodemailer</a>.</h4>  If a <span class="code">transport</span> option is passed into the
     <a href="#config"><span class="code">mailjs.config()</span></a> that is a Nodemailer transport,
    </p>

    <pre class="code">mailjs.config({
  <i>... mailjs.config() options ...</i>,
  <b>transport</b>: nodemailer.createTransport( 'SES', {
    AWSAccessKeyID: '<i>aws access key</i>',
    AWSSecretKey:   '<i>aws secret key</i>'
  })
});</pre>
    <div class="example">Mail.js <span class="code">config()</span> Example with a Nodemailer Amazon SES Transport</div>

    <p>
     a <span class="code">mailjs.send()</span> method is available:
    </p>

    <pre class="code">mailjs.send({
  <i>... <a href="http://www.nodemailer.com/docs/messages">Nodemailer message options</a> ...</i>,
  <b>body</b>: { <span class="desc"><i>// <b>body</b> replaces the Nodemailer <b>text</b> and <b>html</b> options</i></span>
    <b>src</b>: <span class="desc">A string or <a href="#functionTemplates">function</a> containing the template to render.</span>
    <b>binds</b>: <span class="desc">An object containing bind definitions that will be available while processing this render.</span>
    <b>templates</b>: <span class="desc">An object containing template definitions that will be available while processing this render.</span>
  }
});</pre>
    <div class="example">Mail.js <span class="code">send()</span> API</div>

   </div>
   <div>
    <h3>Example</h3>

    <p>Use <span class="code">mailjs.config()</span> to define common bindings and templates:</p>

<pre class="code">mailjs.config({
  binds: {
    company: 'ACME Corp'
  },
  templates: {
    wrapper: {
      html:
        '[html]' +
         '[head/]' +
         '&lt;body&gt;' +
          '&lt;div style="color:#222;font-weight:bold;"&gt;ACME Corp&lt;div&gt;',
      htmlClose:
          '&lt;div style="color:#ccc;font-size:12px;"&gt;Copyright 2014&lt;div&gt;' +
         '&lt;/body&gt;' +
        '[/html]'
      text:
        'ACME Corp\n---------\n\n',
      textClose:
        'Copyright 2014'
    },
    email: {
      html: '&lt;a class="email" href="mailto:!email"&gt;!email</a>',
      text: '!email'
    }
  }
});</pre>
    <div class="example">Mail.js <span class="code"><b>config</b></span> example</div>

    <p>A simple <span class="code">render</span> example:</p>

<pre class="code">mailjs.render({
  src: 'Thank you for your order.  Contact us at [email=!companyEmail] if you have any problems.',
  binds: {
    title: '!company -- Order Complete'
  },
  html: true,
  css: '.email { color: blue; }`
}</pre>
    <div class="example">Mail.js <span class="code"><b>render</b></span> example</div>

   </div>

   <div>
    <h3>Resources</h3>

    <ul>
     <li><a id="emailBoilerplate" href="http://htmlemailboilerplate.com/">HTML Email Boilerplate</a></li>
     <li><a href="http://www.campaignmonitor.com/css/">Campaign Monitor's Ultimate Guide to CSS</a></li>
     <li><a href="http://templates.mailchimp.com/">Mailchimp's Email Design Reference</a></li>
     <li><a href="https://litmus.com/blog/hotmail-and-outlook-com-drop-support-for-margin">Hotmail and Outlook.com Drop Support for Margin</a>
     <li>
      <a href="http://www.emailonacid.com/">Email on Acid</a><br>
      Great tool for testing the output of your emails across dozens of email readers.  Highly recommended.
     </li>
    </ul>
   </div>

   <div>
    <h3>Support</h3>

    <a href="https://github.com/dimensia/mailjs/issues">Submit an issue and/or view existing issues</a>
   </div>

   <div>
    <h3>Contribute</h3>

    <p>
     Quality email rendering is an ongoing concern and is constantly changing as email clients are updated and new ones created.  Pull requests
     and other contributions to this project are greatly and gratefully welcome!
   </div>

   <div>
    <h3>License</h3>

<pre>The MIT License (MIT)

Copyright (c) 2014 Mark Bradley, Ted Halmrast

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</pre>
    <div class="example">Open Source License</div>
  </div>
 </body>
</html>
